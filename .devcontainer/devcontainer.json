{
  "name": "Python 3",
  "image": "mcr.microsoft.com/devcontainers/python:1-3.11-bullseye",

  "customizations": {
    "codespaces": {
      "openFiles": ["README.md", "streamlit_app.py"]
    },
    "vscode": {
      "settings": {},
      "extensions": ["ms-python.python", "ms-python.vscode-pylance"]
    }
  },

  // Runs once after the container is built
  "postCreateCommand": "sudo apt-get update && sudo apt-get install -y libgl1 libglib2.0-0 libsm6 libxext6 libxrender1 && python -m venv .venv && . .venv/bin/activate && pip install -U pip && if [ -f requirements.txt ]; then pip install -r requirements.txt; fi",

  // (Optional) If you want to keep your auto-run behavior when the editor attaches:
  "postAttachCommand": {
    "server": "bash -lc '. .venv/bin/activate && streamlit run streamlit_app.py'"
  },

  "portsAttributes": {
    "8501": { "label": "Application", "onAutoForward": "openPreview" }
  },
  "forwardPorts": [8501]
}
